{% block stylesheets %}
	<link href="{{ asset('styles/topbar.css') }}" rel="stylesheet">
{% endblock %}

<div>
	<ul>
		<li>
			<a href="{{ path('ui_home') }}" class="nav" id='Logo'>Pizza</a>
		</li>
		<li>
			<a href="{{ path('ui_menu') }}" class="nav" id='home'>Menu</a>
		</li>

		{% if is_granted('ROLE_ADMIN') %}
			<li>
				<a href="{{ path('list') }}" class="nav" id='Menu'>Products</a>
			</li>
		{% endif %}
		{% if is_granted('IS_AUTHENTICATED_FULLY') %}
			<li>
				<a href="{{ path('logout') }}" class="nav-right" id="Logout">Log out</a>
			</li>

		{% else %}
			<li>
				<a href="{{ path('ui_register') }}" class="nav-right">Sign up</a>
			</li>

			<li>
				<a href="{{ path('ui_login') }}" class="nav-right" id="Logout">Log in</a>
			</li>
		{% endif %}
		<li>

			<div id='shoppingView'>
				<span id="cartIcon"></span>

				<a href="{{ path('shopping_cart') }}" class="nav-right" id="shoppingCart">
					<svg xmlns="http://www.w3.org/2000/svg" width="46" height="46" fill="currentColor" class="bi bi-cart4" viewbox="0 0 16 16">
						<path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"/>
					</svg>
				</a>

			</div>

		</li>


	</ul>

	<script>
		// JavaScript
const cartIconElement = document.getElementById("cartIcon");
let cartIconCounter = parseInt(localStorage.getItem("cartIconCounter")) || 0;

if (cartIconCounter > 0) {
cartIconElement.innerHTML = cartIconCounter;
cartIconElement.style.backgroundColor = "crimson";
}

{# // JavaScript
window.addEventListener('storage', function(event) {
    if (event.key === 'cartIconCounter') {
        const cartIconElement = document.getElementById("cartIcon");
        let cartIconCounter = parseInt(event.newValue) || 0;
        
        if (cartIconCounter > 0) {
            cartIconElement.innerHTML = cartIconCounter;
            cartIconElement.style.backgroundColor = "crimson";
        }
    }
}); #}

	</script>
</div>
